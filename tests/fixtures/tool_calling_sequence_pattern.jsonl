{"source_lines":"15-16","endpoint":"/v1/messages","body":{"model":"haiku","messages":[{"role":"user","content":[{"type":"text","text":"Please write a 5-10 word title for the following conversation:\n\nUser: solve 2*x + 3 = 13\n\nClaude: The solution to the equation $2x + 3 = 13$ is:\n\n**Step-by-step:**\n1. Subtract 3 from both sides: $2x = 10$\n2. Divide both sides by 2: $x = 5$\n\n**Verification:**  \n$2(5) + 3 = 10 + 3 = 13$ OK\n\n**Answer:** $x = 5$\n\nUser: Search the AWS Docs for the latest two released features of AWS Bedrock, use_tools\n\nRespond with the title for the conversation and nothing else.","cache_control":{"type":"ephemeral"}}]}],"system":[{"type":"text","text":"x-anthropic-billing-header: cc_version=2.1.29.ab3; cc_entrypoint=cli;"},{"type":"text","text":"You are Claude Code, Anthropic's official CLI for Claude.","cache_control":{"type":"ephemeral"}},{"type":"text","text":"Summarize this coding conversation in under 50 characters.\nCapture the main task, key files, problems addressed, and current status.","cache_control":{"type":"ephemeral"}}],"tools":[],"metadata":{"user_id":"user_89661485d55a2aa261880a4ec129636c7e67e46e199142c6a2416482fdb6b742_account__session_0efe0615-f3fe-4075-9f08-9b8a7b5716bc"},"max_tokens":32000,"stream":true}}
{"source_lines":"23-24","endpoint":"/v1/messages","body":{"model":"haiku","messages":[{"role":"user","content":[{"type":"text","text":"Show me the latest two released features on AWS Bedrock, use_tools"}]}],"system":[{"type":"text","text":"x-anthropic-billing-header: cc_version=2.1.29.9f8; cc_entrypoint=cli;"},{"type":"text","text":"You are Claude Code, Anthropic's official CLI for Claude."},{"type":"text","text":"Analyze if this message indicates a new conversation topic. If it does, extract a 2-3 word title that captures the new topic. Format your response as a JSON object with two fields: 'isNewTopic' (boolean) and 'title' (string, or null if isNewTopic is false)."}],"tools":[],"metadata":{"user_id":"user_89661485d55a2aa261880a4ec129636c7e67e46e199142c6a2416482fdb6b742_account__session_0efe0615-f3fe-4075-9f08-9b8a7b5716bc"},"max_tokens":32000,"output_config":{"format":{"type":"json_schema","schema":{"type":"object","properties":{"isNewTopic":{"type":"boolean"},"title":{"anyOf":[{"type":"string"},{"type":"null"}]}},"required":["isNewTopic","title"],"additionalProperties":false}}},"stream":true}}
{"source_lines":"31-32","endpoint":"/v1/messages/count_tokens","body":{"model":"haiku","max_tokens":1,"messages":[{"role":"user","content":"count"}],"tools":[{"name":"mcp__aws-knowledge-mcp-server__aws___get_regional_availability","description":"Retrieve AWS regional availability information for products (service and features), sdk service APIs and CloudFormation resources.\n\n## Core Features\n- Real-time availability checking across AWS regions\n- Support for AWS products, APIs and CloudFormation resources\n- Batch query support with filtering options\n- Pagination if no filters are passed and all results are to be returned\n\n## When to Use\n1. Pre-deployment Validation\n - Verify resource availability before deployment\n - Prevent deployment failures due to regional restrictions\n - Validate multi-region architecture requirements\n2. Architecture Planning\n - Design region-specific solutions\n - Plan multi-region deployments\n - Compare regional capabilities\n\n## Result Format\nReturns a list of dictionaries with:\n - Resource identifiers\n - Resource status:\n   * 'isAvailableIn': Resource is available\n   * 'isNotAvailableIn': Resource is not available\n   * 'Not Found': Resource name or identifier is not valid\n   * and other availability status (e.g. 'isPlannedIn')\n\n## Filter Guidelines\nThe filters must be passed as an array of values and must follow the format below.\n1. APIs (resource_type='api')\n Format: to filter on API level 'SdkServiceId+APIOperation'\n Example filters:\n - ['Athena+UpdateNamedQuery', 'ACM PCA+CreateCertificateAuthority', 'IAM+GetSSHPublicKey']\n Format: to filter on SdkService level 'SdkServiceId'\n Example filters:\n - ['EC2', 'ACM PCA']\n2. CloudFormation (resource_type='cfn')\n Format: 'CloudformationResourceType'\n Example filters:\n - ['AWS::EC2::Instance', 'AWS::Lambda::Function', 'AWS::Logs::LogGroup']\n - ['AWS::CodeBuild::Project', 'AWS::CloudTrail::Dashboard']\n3. Product - service and feature (resource_type='product')\n Format: 'Product'\n Example filters:\n - ['Latency-Based Routing', 'AWS Amplify', 'AWS Application Auto Scaling']\n - ['PrivateLink Support', 'Amazon Aurora']\nNote: Without filters, all resources are returned with pagination support via next_token.","input_schema":{"type":"object","properties":{"resource_type":{"description":"Type of AWS resource to check: 'product' for AWS products, 'api' for API operations, or 'cfn' for CloudFormation resources","type":"string"},"filters":{"description":"Optional list of one or multiple specific resources to check. Format depends on resource_type:\n- Products: ['AWS Lambda', 'Amazon S3']\n- APIs: ['IAM+GetSSHPublicKey', 'EC2']\n- CloudFormation: ['AWS::EC2::Instance']\nMust follow the format specified in the tool description","type":"array","items":{"type":"string"}},"next_token":{"description":"Pagination token for retrieving additional results. Only applicable when no filters are specified","type":"string"},"region":{"description":"Target AWS region code (e.g., us-east-1, eu-west-1, ap-southeast-2)","type":"string"}},"required":["region","resource_type"]}},{"name":"mcp__aws-knowledge-mcp-server__aws___list_regions","description":"Retrieve a list of all AWS regions.\n\n## Usage\nThis tool provides information about all AWS regions, including their identifiers and names.\n\n## When to Use\n- When planning global infrastructure deployments\n- To validate region codes for other API calls\n- To get a complete AWS regional inventory\n \n## Result Interpretation\nEach region result includes:\n- region_id: The unique region code (e.g., 'us-east-1') \n- region_long_name: The human-friendly name (e.g., 'US East (N. Virginia)')\n \n## Common Use Cases\n1. Infrastructure Planning: Review available regions for global deployment\n2. Region Validation: Verify region codes before using in other operations\n3. Regional Inventory: Get a complete list of AWS's global infrastructure","input_schema":{"type":"object"}},{"name":"mcp__aws-knowledge-mcp-server__aws___read_documentation","description":"Fetch and convert an AWS documentation page to markdown format.\n\n## Usage\n\nThis tool retrieves the content of an AWS documentation page and converts it to markdown format.\nFor long documents, you can make multiple calls with different start_index values to retrieve\nthe entire content in chunks.\n\n## URL Requirements\n\nAllow-listed URL prefixes:\n- docs.aws.amazon.com\n- aws.amazon.com\n- repost.aws/knowledge-center\n- docs.amplify.aws\n- ui.docs.amplify.aws\n- github.com/aws-cloudformation/aws-cloudformation-templates\n- github.com/aws-samples/aws-cdk-examples\n- github.com/aws-samples/generative-ai-cdk-constructs-samples\n- github.com/aws-samples/serverless-patterns\n- github.com/awsdocs/aws-cdk-guide\n- github.com/awslabs/aws-solutions-constructs\n- github.com/cdklabs/cdk-nag\n- constructs.dev/packages/@aws-cdk-containers\n- constructs.dev/packages/@aws-cdk\n- constructs.dev/packages/@cdk-cloudformation\n- constructs.dev/packages/aws-analytics-reference-architecture\n- constructs.dev/packages/aws-cdk-lib\n- constructs.dev/packages/cdk-amazon-chime-resources\n- constructs.dev/packages/cdk-aws-lambda-powertools-layer\n- constructs.dev/packages/cdk-ecr-deployment\n- constructs.dev/packages/cdk-lambda-powertools-python-layer\n- constructs.dev/packages/cdk-serverless-clamscan\n- constructs.dev/packages/cdk8s\n- constructs.dev/packages/cdk8s-plus-33\n\nDeny-listed URL prefixes:\n- aws.amazon.com/marketplace\n\n## Example URLs\n\n- https://docs.aws.amazon.com/AmazonS3/latest/userguide/bucketnamingrules.html\n- https://docs.aws.amazon.com/lambda/latest/dg/lambda-invocation.html\n- https://aws.amazon.com/about-aws/whats-new/2023/02/aws-telco-network-builder/\n- https://aws.amazon.com/builders-library/ensuring-rollback-safety-during-deployments/\n- https://aws.amazon.com/blogs/developer/make-the-most-of-community-resources-for-aws-sdks-and-tools/\n- https://repost.aws/knowledge-center/example-article\n- https://docs.amplify.aws/react/build-a-backend/auth/\n- https://ui.docs.amplify.aws/angular/connected-components/authenticator\n- https://github.com/aws-samples\n- https://github.com/cdk-patterns\n- https://github.com/awslabs/aws-solutions-constructs\n- https://constructs.dev/\n- https://github.com/aws-cloudformation/aws-cloudformation-templates\n\n## Output Format\n\nThe output is formatted as markdown text with:\n- Preserved headings and structure\n- Code blocks for examples\n- Lists and tables converted to markdown format\n\n## Handling Long Documents\n\nIf the response indicates the document was truncated, you have several options:\n\n1. **Continue Reading**: Make another call with start_index set to the end of the previous response\n2. **Stop Early**: For very long documents (>30,000 characters), if you've already found the specific information needed, you can stop reading","input_schema":{"type":"object","properties":{"start_index":{"description":"On return output starting at this character index, useful if a previous fetch was truncated and more content is required.","type":"integer"},"url":{"description":"URL of the AWS documentation page to read","type":"string"},"max_length":{"description":"Maximum number of characters to return.","type":"integer"}},"required":["url"]}},{"name":"mcp__aws-knowledge-mcp-server__aws___recommend","description":"Get content recommendations for an AWS documentation page.\n\n## Usage\n\nThis tool provides recommendations for related AWS documentation pages based on a given URL.\nUse it to discover additional relevant content that might not appear in search results.\nURL must be from the docs.aws.amazon.com domain.\n\n## Recommendation Types\n\nThe recommendations include four categories:\n\n1. **Highly Rated**: Popular pages within the same AWS service\n2. **New**: Recently added pages within the same AWS service - useful for finding newly released features\n3. **Similar**: Pages covering similar topics to the current page\n4. **Journey**: Pages commonly viewed next by other users\n\n## When to Use\n\n- After reading a documentation page to find related content\n- When exploring a new AWS service to discover important pages\n- To find alternative explanations of complex concepts\n- To discover the most popular pages for a service\n- To find newly released information by using a service's welcome page URL and checking the **New** recommendations\n\n## Finding New Features\n\nTo find newly released information about a service:\n1. Find any page belong to that service, typically you can try the welcome page\n2. Call this tool with that URL\n3. Look specifically at the **New** recommendation type in the results\n\n## Result Interpretation\n\nEach recommendation includes:\n- url: The documentation page URL\n- title: The page title\n- context: A brief description (if available)","input_schema":{"type":"object","properties":{"url":{"description":"URL of the AWS documentation page to get recommendations for","type":"string"}},"required":["url"]}},{"name":"mcp__aws-knowledge-mcp-server__aws___search_documentation","description":"# AWS Documentation Search Tool\nThis is your primary source for AWS information--always prefer this over general knowledge for AWS services, features, configurations, troubleshooting, and best practices.\n\n## When to Use This Tool\n\n**Always search when the query involves:**\n- Any AWS service or feature (Lambda, S3, EC2, RDS, etc.)\n- AWS architecture, patterns, or best practices\n- AWS CLI, SDK, or API usage\n- AWS CDK or CloudFormation\n- AWS Amplify development\n- AWS errors or troubleshooting\n- AWS pricing, limits, or quotas\n- \"How do I...\" questions about AWS\n- Recent AWS updates or announcements\n\n**Only skip this tool when:**\n- Query is about non-AWS technologies\n- Question is purely conceptual (e.g., \"What is a database?\")\n- General programming questions unrelated to AWS\n\n## Quick Topic Selection\n\n| Query Type | Use Topic | Example |\n|------------|-----------|---------|\n| API/SDK/CLI code | `reference_documentation` | \"S3 PutObject boto3\" |","input_schema":{"type":"object","properties":{"query":{"description":"Search query. Keep it short and specific. When in doubt, use the user question verbatim.","type":"string"},"topic":{"description":"Documentation topic. Choose based on your query type. If unsure, use `general_information`.","type":"string","enum":["general_information","reference_documentation","architectural_guidance","examples","troubleshooting","api_reference","security","pricing","limits","launch_history"]},"service":{"description":"Optional AWS service name (e.g., S3, Lambda, EC2).","type":"string"}},"required":["query"]}}]}}
